{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project-ff/webpack/bootstrap","webpack://mesto-project-ff/webpack/runtime/define property getters","webpack://mesto-project-ff/webpack/runtime/hasOwnProperty shorthand","webpack://mesto-project-ff/./src/scripts/api.js","webpack://mesto-project-ff/./src/scripts/card.js","webpack://mesto-project-ff/./src/scripts/modal.js","webpack://mesto-project-ff/./src/scripts/validation.js","webpack://mesto-project-ff/./src/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const config = {\r\n  baseUrl: 'https://mesto.nomoreparties.co/v1/wff-cohort-32',\r\n  headers: {\r\n    authorization: 'ed4de3ef-facf-412d-8cb3-cd7774d2f0b7',\r\n    'Content-Type': 'application/json'\r\n  }\r\n};\r\n\r\nconst handleResponse = (res) => {\r\n  if (res.ok) {\r\n    return res.json();\r\n  }\r\n  return Promise.reject(`Ошибка: ${res.status}`);\r\n};\r\n\r\nexport const getUserInfo = () => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    headers: config.headers\r\n  })\r\n    .then(handleResponse);\r\n};\r\n\r\nexport const getInitialCards = () => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    headers: config.headers,\r\n  })\r\n    .then(handleResponse);\r\n};\r\n\r\nexport const updateUserInfo = (name, about) => {\r\n  return fetch(`${config.baseUrl}/users/me`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      about: about\r\n    })\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const postNewCard = (name, link) => {\r\n  return fetch(`${config.baseUrl}/cards`, {\r\n    method: 'POST',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      name: name,\r\n      link: link\r\n    })\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const deleteUserCard = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const putLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'PUT',\r\n    headers: config.headers,\r\n  })\r\n  .then(handleResponse)\r\n}\r\n\r\nexport const deleteLike = (cardId) => {\r\n  return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n    method: 'DELETE',\r\n    headers: config.headers,\r\n  })\r\n  .then(handleResponse)\r\n};\r\n\r\nexport const updateAvatar = (avatar) => {\r\n  return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n    method: 'PATCH',\r\n    headers: config.headers,\r\n    body: JSON.stringify({\r\n      avatar: avatar\r\n    })\r\n  })\r\n  .then(handleResponse)\r\n};","import { cardTemplate } from '../index.js';\r\nimport { deleteLike, deleteUserCard, putLike } from './api.js';\r\n\r\nfunction createCard(card, deleteCardHandler, likeCardHandler, openImageHandler, userId) {\r\n  const cardElement = cardTemplate.querySelector('.card').cloneNode(true);\r\n  const cardDeleteButton = cardElement.querySelector('.card__delete-button');\r\n  const cardImage = cardElement.querySelector('.card__image');\r\n  const cardTitle = cardElement.querySelector('.card__title');\r\n  const cardLikeButton = cardElement.querySelector('.card__like-button');\r\n  const cardLikeCounter = cardElement.querySelector('.card__like-counter');\r\n\r\n  cardImage.src = card.link;\r\n  cardImage.alt = card.name;\r\n  cardTitle.textContent = card.name;\r\n  cardLikeCounter.textContent = card.likes.length;\r\n\r\n  if(card.owner._id !== userId) {\r\n    cardDeleteButton.style.display = 'none';\r\n  }\r\n\r\n  if(card.likes.some((user) => user._id === userId)) {\r\n    cardLikeButton.classList.add('card__like-button_is-active');\r\n  }\r\n  \r\n  cardDeleteButton.addEventListener('click', () => deleteCardHandler(cardElement, card._id));\r\n  cardLikeButton.addEventListener('click', () => likeCardHandler(cardLikeButton, cardLikeCounter, card._id));\r\n  cardImage.addEventListener('click', () => openImageHandler(card.name, card.link));\r\n\r\n  return cardElement;\r\n}\r\n\r\nfunction deleteCard(cardElement, cardId) {\r\n  deleteUserCard(cardId)\r\n    .then(() => {\r\n      cardElement.remove();\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    });\r\n}\r\n\r\nfunction likeCard(likeButton, likeCounter, cardId) {\r\n  if(!likeButton.classList.contains('card__like-button_is-active')) {\r\n    putLike(cardId)\r\n      .then((card) => {\r\n        likeButton.classList.add('card__like-button_is-active');\r\n        likeCounter.textContent = card.likes.length;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n  else {\r\n    deleteLike(cardId)\r\n      .then((card) => {\r\n        likeButton.classList.remove('card__like-button_is-active');\r\n        likeCounter.textContent = card.likes.length;\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }\r\n}\r\n\r\nexport { createCard, deleteCard, likeCard };","function openModal(modal) {\r\n  modal.classList.add('popup_is-opened');\r\n  document.addEventListener('keydown', closeModalOnEsc);\r\n}\r\n\r\nfunction closeModal(modal) {\r\n  modal.classList.remove('popup_is-opened');\r\n  document.removeEventListener('keydown', closeModalOnEsc);\r\n}\r\n\r\nfunction closeModalOnEsc (evt) {\r\n  if (evt.key === 'Escape') {\r\n    const popupOpened = document.querySelector('.popup_is-opened');\r\n    closeModal(popupOpened);\r\n  }\r\n}\r\n\r\nexport { openModal, closeModal };","const showInputError = (formElement, inputElement, config) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.add(config.inputErrorClass);\r\n  if(inputElement.validity.patternMismatch) {\r\n    errorElement.textContent = inputElement.dataset.errorMessage;\r\n  }\r\n  else {\r\n    errorElement.textContent = inputElement.validationMessage;\r\n  }\r\n  errorElement.classList.add(config.errorClass);\r\n};\r\n\r\nconst hideInputError = (formElement, inputElement, config) => {\r\n  const errorElement = formElement.querySelector(`.${inputElement.id}-error`);\r\n  inputElement.classList.remove(config.inputErrorClass);\r\n  errorElement.classList.remove(config.errorClass);\r\n  errorElement.textContent = '';\r\n};\r\n\r\nconst isValid = (formElement, inputElement, config) => {\r\n  if(!inputElement.validity.valid) {\r\n    showInputError(formElement, inputElement, config);\r\n  }\r\n  else {\r\n    hideInputError(formElement, inputElement, config);\r\n  }\r\n};\r\n\r\nconst hasInvalidInput = (inputList) => {\r\n  return inputList.some(inputElement => {\r\n    return !inputElement.validity.valid;\r\n  });\r\n};\r\n\r\nconst toggleButtonState = (formElement, config) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\r\n  const buttonElement = formElement.querySelector(config.submitButtonSelector);\r\n  if(hasInvalidInput(inputList)) {\r\n    buttonElement.disabled = true;\r\n    buttonElement.classList.add(config.inactiveButtonClass);\r\n  }\r\n  else {\r\n    buttonElement.disabled = false;\r\n    buttonElement.classList.remove(config.inactiveButtonClass);\r\n  }\r\n};\r\n\r\nconst clearValidation = (formElement, config) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\r\n  inputList.forEach(inputElement => {\r\n    hideInputError(formElement, inputElement, config)\r\n  });\r\n  toggleButtonState(formElement, config);\r\n};\r\n\r\nconst setEventListeners = (formElement, config) => {\r\n  const inputList = Array.from(formElement.querySelectorAll(config.inputSelector));\r\n  inputList.forEach(inputElement => {\r\n    inputElement.addEventListener('input', () => {\r\n      isValid(formElement, inputElement, config);\r\n      toggleButtonState(formElement, config);\r\n    });\r\n  });\r\n};\r\n\r\nconst enableValidation = (config) => {\r\n  const formList = Array.from(document.querySelectorAll(config.formSelector));\r\n  formList.forEach(formElement => {\r\n    setEventListeners(formElement, config);\r\n  });\r\n};\r\n\r\nexport { enableValidation, clearValidation}\r\n\r\n","import './pages/index.css';\r\nimport { createCard, deleteCard, likeCard } from './scripts/card.js';\r\nimport { openModal, closeModal } from './scripts/modal.js';\r\nimport { enableValidation, clearValidation } from './scripts/validation.js';\r\nimport { getInitialCards, getUserInfo, postNewCard, updateAvatar, updateUserInfo } from './scripts/api.js';\r\n\r\nconst cardTemplate = document.querySelector('#card-template').content;\r\nconst cardsList = document.querySelector('.places__list');\r\n\r\nconst popupEditInfo = document.querySelector('.popup_type_edit');\r\nconst popupAdd = document.querySelector('.popup_type_new-card');\r\nconst popupImage = document.querySelector('.popup_type_image');\r\nconst popupEditAvatar = document.querySelector('.popup_type_edit-avatar');\r\n\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDescr = document.querySelector('.profile__description');\r\nconst profileAvatar = document.querySelector('.profile__image');\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst cardAddButton = document.querySelector('.profile__add-button');\r\n\r\nconst formProfile = document.forms['edit-profile'];\r\nconst nameInput = formProfile.name;\r\nconst jobInput = formProfile.description;\r\n\r\nconst formNewCard = document.forms['new-place'];\r\nconst placeInput = formNewCard['place-name'];\r\nconst linkInput = formNewCard.link;\r\n\r\nconst formNewAvatar = document.forms['new-avatar'];\r\nconst avatarInput = formNewAvatar.avatar;\r\n\r\nconst validationConfig = {\r\n  formSelector: '.popup__form',\r\n  inputSelector: '.popup__input',\r\n  submitButtonSelector: '.popup__button',\r\n  inactiveButtonClass: 'popup__button_disabled',\r\n  inputErrorClass: 'popup__input_type_error',\r\n  errorClass: 'popup__error_visible'\r\n};\r\n\r\nenableValidation(validationConfig);\r\n\r\nfunction openImagePopup(imageCaption, imageLink) {\r\n  const image = popupImage.querySelector('.popup__image');\r\n  const caption = popupImage.querySelector('.popup__caption');\r\n  image.src = imageLink;\r\n  image.alt = imageCaption;\r\n  caption.textContent = imageCaption;\r\n  openModal(popupImage);\r\n}\r\n\r\nfunction openEditInfoPopup() {\r\n  nameInput.value = profileTitle.textContent;\r\n  jobInput.value = profileDescr.textContent;\r\n  clearValidation(formProfile, validationConfig);\r\n  openModal(popupEditInfo);\r\n}\r\n\r\nfunction openAddPopup() {\r\n  formNewCard.reset();\r\n  clearValidation(formNewCard, validationConfig);\r\n  openModal(popupAdd);\r\n}\r\n\r\nfunction openEditAvatarPopup() {\r\n  formNewAvatar.reset();\r\n  clearValidation(formNewAvatar, validationConfig);\r\n  openModal(popupEditAvatar);\r\n}\r\n\r\nfunction renderSaving(isSaving, button) {\r\n  if(isSaving) {\r\n    button.textContent = 'Сохранение...';\r\n  }\r\n  else {\r\n    button.textContent = 'Сохранить';\r\n  }\r\n}\r\n\r\nfunction formProfileSubmit(evt) {\r\n  evt.preventDefault();\r\n  const saveProfileButton = formProfile.querySelector('.popup__button');\r\n  renderSaving(true, saveProfileButton);\r\n  updateUserInfo(nameInput.value, jobInput.value)\r\n    .then((userInfo) => {\r\n      profileTitle.textContent = userInfo.name;\r\n      profileDescr.textContent = userInfo.about;\r\n      closeModal(popupEditInfo);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => renderSaving(false, saveProfileButton));\r\n}\r\n\r\nfunction formNewCardSubmit(evt) {\r\n  evt.preventDefault();\r\n  const saveNewCardButton = formNewCard.querySelector('.popup__button');\r\n  renderSaving(true, saveNewCardButton);\r\n  postNewCard(placeInput.value, linkInput.value)\r\n    .then((card) => {\r\n      cardsList.prepend(createCard(card, deleteCard, likeCard, openImagePopup, card.owner._id));\r\n      formNewCard.reset();\r\n      closeModal(popupAdd);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => renderSaving(false, saveNewCardButton));\r\n}\r\n\r\nfunction formNewAvatarSubmit(evt) {\r\n  evt.preventDefault();\r\n  const saveNewAvatarButton = formNewAvatar.querySelector('.popup__button');\r\n  renderSaving(true, saveNewAvatarButton);\r\n  updateAvatar(avatarInput.value)\r\n    .then((data) => {\r\n      profileAvatar.style = `background-image: url(${data.avatar});`;\r\n      closeModal(popupEditAvatar);\r\n    })\r\n    .catch((err) => {\r\n      console.log(err);\r\n    })\r\n    .finally(() => renderSaving(false, saveNewAvatarButton));\r\n}\r\n\r\nprofileEditButton.addEventListener('click', openEditInfoPopup);\r\nformProfile.addEventListener('submit', formProfileSubmit);\r\n\r\ncardAddButton.addEventListener('click', openAddPopup);\r\nformNewCard.addEventListener('submit', formNewCardSubmit);\r\n\r\nprofileAvatar.addEventListener('click', openEditAvatarPopup);\r\nformNewAvatar.addEventListener('submit', formNewAvatarSubmit)\r\n\r\ndocument.querySelectorAll('.popup').forEach((popup) => {\r\n  popup.classList.add('popup_is-animated');\r\n  popup.addEventListener('click', (evt) => {\r\n    if (evt.target.classList.contains('popup__close') || evt.target.classList.contains('popup')) {\r\n      closeModal(popup);\r\n    }\r\n  });\r\n});\r\n\r\nconst setUserInfo = (user) => {\r\n  profileTitle.textContent = user.name;\r\n  profileDescr.textContent = user.about;\r\n  profileAvatar.style = `background-image: url(${user.avatar});`;\r\n};\r\n\r\nconst setCards = (cards, userId) => {\r\n  cards.forEach((card) => {\r\n    cardsList.append(createCard(card, deleteCard, likeCard, openImagePopup, userId));\r\n  });\r\n};\r\n\r\nPromise.all([getUserInfo(), getInitialCards()])\r\n  .then(([userInfo, cards]) => {\r\n    setUserInfo(userInfo);\r\n    setCards(cards, userInfo._id);\r\n  })\r\n  .catch((err) => {\r\n    console.log(err);\r\n  });\r\n\r\nexport { cardTemplate };"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","config","baseUrl","headers","authorization","handleResponse","res","ok","json","Promise","reject","concat","status","createCard","card","deleteCardHandler","likeCardHandler","openImageHandler","userId","cardElement","cardTemplate","querySelector","cloneNode","cardDeleteButton","cardImage","cardTitle","cardLikeButton","cardLikeCounter","src","link","alt","name","textContent","likes","length","owner","_id","style","display","some","user","classList","add","addEventListener","deleteCard","cardId","fetch","method","then","deleteUserCard","remove","catch","err","console","log","likeCard","likeButton","likeCounter","contains","deleteLike","putLike","openModal","modal","document","closeModalOnEsc","closeModal","removeEventListener","evt","hideInputError","formElement","inputElement","errorElement","id","inputErrorClass","errorClass","toggleButtonState","inputList","Array","from","querySelectorAll","inputSelector","buttonElement","submitButtonSelector","validity","valid","hasInvalidInput","disabled","inactiveButtonClass","clearValidation","forEach","content","cardsList","popupEditInfo","popupAdd","popupImage","popupEditAvatar","profileTitle","profileDescr","profileAvatar","profileEditButton","cardAddButton","formProfile","forms","nameInput","jobInput","description","formNewCard","placeInput","linkInput","formNewAvatar","avatarInput","avatar","validationConfig","formSelector","openImagePopup","imageCaption","imageLink","image","caption","renderSaving","isSaving","button","patternMismatch","dataset","errorMessage","validationMessage","showInputError","isValid","setEventListeners","enableValidation","value","preventDefault","about","saveProfileButton","body","JSON","stringify","userInfo","finally","reset","saveNewCardButton","prepend","saveNewAvatarButton","data","popup","target","all","_ref","_ref2","cards","append","setCards"],"sourceRoot":""}